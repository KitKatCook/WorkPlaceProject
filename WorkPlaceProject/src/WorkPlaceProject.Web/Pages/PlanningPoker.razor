@page "/planningpoker"
<PageTitle>Planning Poker</PageTitle>
@using WorkPlaceProject.Application
@using WorkPlaceProject.Domain.StoryPointer.ValueTypes

<h1>Planning Poker</h1>

<button @onclick="GenerateSessionCode">Generate</button>

<b>@sessionCode</b>

<b>@selectedValue</b>

<b>@email</b>
<button @onclick="FormatEmail">Format</button>

<div class="row">
    
    @foreach (var card in FibonacciValueType.Values)
    {
        <div class="column">
            <div class="card" @onclick="@(e => selectedValue = card.Value.ToString())">
                <h3>@card.Value</h3>
                <h3>@card.Description</h3>
            </div>
        </div>
    }
</div>

@code {

    private string? sessionCode;
    private string? selectedValue;
    private string email = "kit.cook@mhr.co.uk";

    private async Task GenerateSessionCode()
    {
        sessionCode = await Task.FromResult(SessionCodeGenerator.Generate());
    }
    
    private async Task FormatEmail()
    {
        email = await Task.FromResult(UsernameFormatter.Format(email));
    }
}
